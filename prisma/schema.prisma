// Prisma schema for Investor Information Management System
// Documentation: https://pris.ly/d/prisma-schema

generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["fullTextSearchPostgres"]
}

datasource db {
  provider = "postgresql"
}

model Investor {
  id            Int             @id @default(autoincrement())
  firstName     String          @map("first_name") @db.VarChar(100)
  lastName      String          @map("last_name") @db.VarChar(100)
  dateOfBirth   DateTime        @map("date_of_birth") @db.Date
  phoneNumber   String          @map("phone_number") @db.VarChar(20)
  streetAddress String          @map("street_address") @db.VarChar(255)
  state         String          @db.Char(2)
  zipCode       String          @map("zip_code") @db.VarChar(10)
  createdAt     DateTime        @default(now()) @map("created_at") @db.Timestamptz(3)
  updatedAt     DateTime        @updatedAt @map("updated_at") @db.Timestamptz(3)
  files         InvestorFile[]

  @@index([lastName, createdAt], name: "idx_investor_lastname_created")
  @@index([phoneNumber], name: "idx_investor_phone")
  @@map("investors")
}

model InvestorFile {
  id               Int      @id @default(autoincrement())
  investorId       Int      @map("investor_id")
  filePath         String   @map("file_path") @db.VarChar(500)
  fileOriginalName String   @map("file_original_name") @db.VarChar(255)
  fileSize         Int      @map("file_size")
  mimeType         String   @map("mime_type") @db.VarChar(100)
  createdAt        DateTime @default(now()) @map("created_at") @db.Timestamptz(3)
  investor         Investor @relation(fields: [investorId], references: [id], onDelete: Cascade)

  @@index([investorId], name: "idx_investor_file_investor_id")
  @@map("investor_files")
}
